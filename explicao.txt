Dado uma matriz binária, eu percorro linha a linha mantendo um vetor altura com as “alturas” de 1s acumuladas de cima pra baixo; se a célula atual é ‘1’, faço altura[c]++, se é ‘0’, zero altura[c]. Esse altura transforma a linha num histograma que representa todos os retângulos de 1s que terminam nessa linha. Aí, pra cada linha, eu resolvo o maior retângulo no histograma em tempo linear usando uma pilha monótona de índices com alturas estritamente crescentes: vou empilhando enquanto a altura não cai; quando encontro uma altura menor, vou desempilhando e, pra cada barra desempilhada, calculo a área considerando que ela é a altura do retângulo, e a largura é a distância entre o “primeiro menor à esquerda” e o “primeiro menor à direita”, que saem naturalmente da pilha (uso um sentinela de altura 0 no fim pra forçar o esvaziamento). Vou atualizando um máximo global a cada linha. No fim, o maior valor encontrado é a área do maior retângulo de 1s da matriz. Complexidade: O(n*m) no tempo (atualizar altura + histograma linear por linha) e O(m) de espaço. Pontos de atenção: resetar altura em ‘0’, tratar igualdade como “estritamente menor” na comparação da pilha e lembrar do sentinela pra não esquecer nenhuma barra.
